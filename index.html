<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BookKaro - Plan Your Vacation</title>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAL-LDI6qvDPqVWNL_tNb53D7kacbpAlAw",
            authDomain: "bookkaro-f549a.firebaseapp.com",
            projectId: "bookkaro-f549a",
            storageBucket: "bookkaro-f549a.firebasestorage.app",
            messagingSenderId: "1067243117950",
            appId: "1:1067243117950:web:c7682b0aca89d0c0a0272f"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.validateDates = () => {
            const checkin = document.getElementById('checkin').value;
            const checkout = document.getElementById('checkout');
            checkout.min = checkin;
        };

        window.submitBooking = async (e) => {
            e.preventDefault();
            const form = document.getElementById('bookingForm');
            const successArea = document.getElementById('successArea');
            
            try {
                await addDoc(collection(db, "bookings"), {
                    name: document.getElementById('name').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    currentLoc: document.getElementById('currentLoc').value,
                    stayLoc: document.getElementById('stayLoc').value,
                    adults: document.getElementById('adults').value,
                    children: document.getElementById('children').value,
                    seniors: document.getElementById('seniors').value,
                    checkin: document.getElementById('checkin').value,
                    checkout: document.getElementById('checkout').value,
                    propertyType: document.getElementById('propType').value,
                    preference: document.getElementById('pref').value,
                    status: "Pending",
                    timestamp: serverTimestamp()
                });
                
                form.style.display = 'none';
                successArea.style.display = 'block';
                
            } catch (err) { 
                alert("Error submitting request: " + err.message); 
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('checkin').min = today;
        });
    </script>
    <style>
        body { background-color: #e8f5e9; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #01579b; margin: 0; padding: 20px; }
        .form-card { background: #e3f2fd; max-width: 550px; margin: 20px auto; border-radius: 20px; box-shadow: 0 8px 16px rgba(0,0,0,0.1); border: 2px solid #81c784; overflow: hidden; }
        .hero-img { width: 100%; height: 200px; object-fit: cover; display: block; }
        .form-content { padding: 25px; }
        h1 { text-align: center; color: #2e7d32; margin-top: 0; }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #90caf9; border-radius: 8px; box-sizing: border-box; }
        .guest-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin: 10px 0; }
        .guest-grid label { font-size: 11px; font-weight: bold; color: #2e7d32; display: block; margin-bottom: 4px; }
        button { background-color: #4caf50; color: white; padding: 14px; border: none; width: 100%; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; margin-top: 10px; }
        button:hover { background-color: #388e3c; }
        #successArea { display: none; text-align: center; padding: 40px 20px; }
        .tick-mark { font-size: 70px; color: #2e7d32; margin-bottom: 15px; }
        .success-msg { font-size: 18px; color: #1b5e20; line-height: 1.5; }
    </style>
</head>
<body>
    <div class="form-card">
        <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=800&q=80" alt="Vacation Landscape" class="hero-img">
        
        <div class="form-content">
            <h1>BookKaro üåøüèïÔ∏è</h1>
            
            <form id="bookingForm" onsubmit="submitBooking(event)">
                <input type="text" id="name" placeholder="Full Name" required>
                <input type="email" id="email" placeholder="Email Address" required>
                <input type="tel" id="phone" placeholder="Contact Number" required>
                <input type="text" id="currentLoc" placeholder="Your Location in India" required>
                <input type="text" id="stayLoc" placeholder="Destination (City/State)" required>
                
                <div class="guest-grid">
                    <div>
                        <label>Adults</label>
                        <input type="number" id="adults" min="1" value="1" required>
                    </div>
                    <div>
                        <label>Children</label>
                        <input type="number" id="children" min="0" value="0" required>
                    </div>
                    <div>
                        <label>Seniors</label>
                        <input type="number" id="seniors" min="0" value="0" required>
                    </div>
                </div>

                <label>Check-in Date:</label> <input type="date" id="checkin" onchange="validateDates()" required>
                <label>Check-out Date:</label> <input type="date" id="checkout" required>
                
                <select id="propType">
                    <option value="Cottage">Cottage</option>
                    <option value="Villa">Villa</option>
                    <option value="Flat">Flat</option>
                    <option value="Houseboat">Houseboat</option>
                    <option value="Hostel">Hostel</option>
                    <option value="Row House">Row House</option>
                </select>
                
                <textarea id="pref" placeholder="Describe your property preference or specific idea..."></textarea>
                <button type="submit">Submit Request</button>
            </form>

            <div id="successArea">
                <div class="tick-mark">‚úî</div>
                <div class="success-msg">
                    <strong>Request Submitted Successfully!</strong><br>
                    You will receive your response in the next 24 hours.
                </div>
            </div>
        </div>
    </div>
</body>
</html>
