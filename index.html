<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BookKaro - Plan Your Vacation</title>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAL-LDI6qvDPqVWNL_tNb53D7kacbpAlAw",
            authDomain: "bookkaro-f549a.firebaseapp.com",
            projectId: "bookkaro-f549a",
            storageBucket: "bookkaro-f549a.firebasestorage.app",
            messagingSenderId: "1067243117950",
            appId: "1:1067243117950:web:c7682b0aca89d0c0a0272f"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.validateDates = () => {
            const checkin = document.getElementById('checkin').value;
            const checkout = document.getElementById('checkout');
            checkout.min = checkin;
        };

        window.submitBooking = async (e) => {
            e.preventDefault();
            const status = document.getElementById('status');
            try {
                await addDoc(collection(db, "bookings"), {
                    name: document.getElementById('name').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    currentLoc: document.getElementById('currentLoc').value,
                    stayLoc: document.getElementById('stayLoc').value,
                    guests: document.getElementById('guests').value,
                    checkin: document.getElementById('checkin').value,
                    checkout: document.getElementById('checkout').value,
                    propertyType: document.getElementById('propType').value,
                    preference: document.getElementById('pref').value,
                    status: "Pending",
                    timestamp: serverTimestamp()
                });
                status.innerText = "Booking request submitted to BookKaro!";
                e.target.reset();
            } catch (err) { status.innerText = "Error: " + err.message; }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('checkin').min = today;
        });
    </script>
    <style>
        body { background-color: #e8f5e9; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #01579b; }
        .form-card { background: #e3f2fd; max-width: 550px; margin: 40px auto; padding: 25px; border-radius: 20px; box-shadow: 0 8px 16px rgba(0,0,0,0.1); border: 2px solid #81c784; }
        h1 { text-align: center; color: #2e7d32; }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #90caf9; border-radius: 8px; box-sizing: border-box; }
        button { background-color: #4caf50; color: white; padding: 14px; border: none; width: 100%; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; }
        button:hover { background-color: #388e3c; }
    </style>
</head>
<body>
    <div class="form-card">
        <h1>BookKaro üåøüèïÔ∏è</h1>
        <form onsubmit="submitBooking(event)">
            <input type="text" id="name" placeholder="Full Name" required>
            <input type="email" id="email" placeholder="Email Address" required>
            <input type="tel" id="phone" placeholder="Contact Number" required>
            <input type="text" id="currentLoc" placeholder="Your Location in India" required>
            <input type="text" id="stayLoc" placeholder="Destination (City/State)" required>
            <input type="number" id="guests" placeholder="Number of Guests" min="1" required>
            <label>Check-in Date:</label> <input type="date" id="checkin" onchange="validateDates()" required>
            <label>Check-out Date:</label> <input type="date" id="checkout" required>
            <select id="propType">
                <option value="Cottage">Cottage</option>
                <option value="Villa">Villa</option>
                <option value="Flat">Flat</option>
                <option value="Houseboat">Houseboat</option>
                <option value="Hostel">Hostel</option>
                <option value="Row House">Row House</option>
            </select>
            <textarea id="pref" placeholder="Describe your property preference or specific idea..."></textarea>
            <button type="submit">Submit Request</button>
        </form>
        <p id="status" style="text-align: center; font-weight: bold;"></p>
    </div>
</body>
</html>
